= Hasan ÇÖDEK 130201066

== The CAS Robot Navigation Toolbox 

== Chapter 1

.Bir robot, bir nokta özelliği ve bir α, r-line özelliğiyle bir harita oluşturup çizme komutları.
=== 1)Bir robot, bir nokta özelliği ve bir α, r-line özelliğiyle bir harita oluşturup çizme komutları.

1.Harita nesnesinin yapıcı metodudur.   Yöntem bir ad ve bir zaman damgası alır.
[source, Matlab]
-----
G = map('global map',0); 
-----
2.Robot yapım yöntemidir ve bir ad, tanımlayıcı, x, y, θ-pozu, 3 x 3 poz kovaryans matrisi, sol ve sağ tekerlek yarığı, tekerlek tabanı (hepsi metre cinsinden) ve bir zaman damgası alır.(robotdd:diferansiyel drive robot(diferansiyel sürüş robotu).
[source, Matlab]
-----
r = robotdd('Piggy',[1;2;pi/6],0.001*eye(3),0.2,0.2,0.5,4,0);)
-----
3.Haritaya ekleme metodudur.Haritanın adı ve eklenecek nesne değişkeninin adını alır.
[source, Matlab]
-----
G = addentity(G,r);
-----
4.Nokta özellğini oluşturma metodudur. Yapıcı yöntemi bir tanımlayıcı, bir x, y konumu ve bir 2 x 2 konum kovaryans matrisi alır.
[source, Matlab]
-----
p = pointfeature(101,[-2;2],[0.01 0.002; 0.002 0.03]);
G = addentity(G,p)//Noktayı haritaya eklemek için. Noktalı virgülü G' hemen görmek için eklemedik
-----
5.Satır özelliğini oluşturma ve ekleme metodudur. Bir tanımlayıcı, bir α, r konumu ve ilişkili kovaryans matrisi belirtiriz.
[source, Matlab]
-----
l = arlinefeature(201,[-pi/3;2],0.001*eye(2));
G = addentity(G,l)
-----
6.Haritayı çizme metodudur.Haritanın adını,eklenecek nesne adlarını,renk değişkenini alır.
[source, Matlab]
-----
draw(G,1,1,0,'b');
-----
7.Haritanın aralığını belirlemek için.
[source, Matlab]
-----
 axis([-3 3 -3 3]);//Haritanın pencere eksenlerini ± 3 m ile sınırlamayı seçeriz
-----

=== 2)Dahili Örnekleri Kullanma 

.Not = Mevcut sürüm, önceden hazırlanmış beş pre-cooked deneyiyle birlikte geliyor. Bunlar: atrium, bakery1, bakery3, sjursflat with beacons, ve sjursflat with lines. 
1.Ham verileri çizmek için kullanılan komutdur, ve bir ad dizesi, bir başlangıç basamağı ve birkaç adım argümanı alır.
[source, Matlab]
-----
drawrawdata('sjursflatbeaconsetup',1,280);
-----
2.Robot verilerinden bir harita oluşturma ve döngüyü kapatmak için kullanılır.
[source, Matlab]
-----
G = slam('sjursflatbeaconsetup',1,280,3);
-----
[source, Matlab]
-----
 drawrawdata('atriumsetup',1,310);
 G = slam('atriumsetup',1,310,3);

drawrawdata('bakery1setup',1,160);
G = slam('bakery1setup',1,160,3);

drawrawdata('bakery3setup',1,72);
G = slam('bakery3setup',1,72,3);

drawrawdata('sjursflatlinesetup',1,280);
G = slam('sjursflatlinesetup',1,280,3);

-----

=== 3)Robot Tanımlama

1.Kurulum dosyasında params adlı bir yapı ilan edilir. Parametrelerin bazı alanları zorunludur, tanımlanmaları gerekir. Diğer alanlar, bırakıldığında varsayılan değerleri alan isteğe bağlıdır. Ayrıca, params rasgele sayıda kullanıcı tarafından belirtilen alanları içerebilir.

2.Params.robot.name alanı, robotun adını tanımlayan ve tek tırnak içinde verilen bir dizedir.
[source, Matlab]
-----
params.robot.name = 'Pluto';
-----
3.Params.robot.class alanı, araç kinematiği kodlayan robot sınıfının adını tanımlayan ve tek tırnak içinde verilen bir dizedir. Mevcut araç kutusu sürümünde sadece robotdd diferansiyel sürücü robot sınıfı var.
[source, Matlab]
-----
params.robot.class = 'robotdd';
-----
4.Params.robot.formtype alanı, drawrobot'un ilgili argümanına göre sıfır ile beş arasında bir tamsayıdır. Sayı, robotu gösteren tüm şekillerde çizilecek bir şekli ifade eder.
[source, Matlab]
-----
params.robot.formtype = 5;
-----
5.Params.robot.b, params.robot.rl ve params.robot.rr alanları tekerlek tabanı, solun yarıçapı ve sağ tekerleğin yarıçapını belirtir hepsi [m] cinsindendir.
[source, Matlab]
-----
params.robot.b = 0.60; % robot wheelbase in [m]
params.robot.rl = 0.25; % left wheel radius in [m]
params.robot.rr = 0.25; % right wheel radius in [m]
-----
6.Params.robot.x ve params.robot.C alanları sırasıyla 3 × 1 vektör ve 3 × 3 matristir. Bunlar, robotun bir deneyde başlayacağı başlangıç pozunu ve poz kovaryansını belirtir.
[source, Matlab]
-----
params.robot.x = zeros(3,1);
params.robot.C = 0.0001*eye(3);
-----

=== 4)Sensör Tanımlama

1.Params.sensori.name alanı, sensör adını ve tam sayı i ile sensör numarasını tanımlayan ve tek tırnak işareti içinde belirtilen komuttur.
[source, Matlab]
-----
params.sensor1.name = 'Sick LMS200 indoor';
params.sensor2.name = 'Leuze P4';
-----
2.Params.sensori.datafile alanı, veri dosyasının adıyla tek tırnak içinde bir dizedir.
[source, Matlab]
-----
params.sensor2.datafile = 'sjursflat.scn';
-----
3.Params.sensori.label alanı, tek bir tırnak içinde, veri dosyasında sensör i'nin bilgisinin işaretlendiği etiketi tanımlayan bir dizedir.
[source, Matlab]
-----
params.sensor2.label = 'S';
-----
4."arams.sensori.tdownsample ve params.sensori.sdownsample alanları, zamansal ve mekansal aşağı örnekleme faktörlerini belirten pozitif tamsayılardır. Alanlar ve örnekler isteğe bağlıdır. Tanımlanmadıklarında, varsayılan değer olan 1'i alacaklardır .
[source, Matlab]
-----
params.sensor2.tdownsample = 1;
params.sensor2.sdownsample = 20;
-----
5.Params.sensori.indexstr alanı, tek tırnak içinde kullanılır ve amacı veri dosyasındaki her satırın nasıl yorumlanmasını sağlamaktır.  Bu, geçerli matlab dizini ifadeleri ile elemanlar olarak virgülle ayrılmış bir listedir.

[source, Matlab]
-----
params.sensor2.indexstr = '1,2,3,4:2:end,5:2:end';
-----
6.params.sensori.isabsolute boolen bir değişkendir. Bu parametre sensör bilgilerinin dosyadan nasıl okunacağını belirler. Parametre, mutlak ve nispi kodlayıcı ölçümlerini okumak için sunulmuştur. Her bir giriş (her hat) kendi başına bir ölçüm olduğunda, bayrak 0'a ayarlanacaktır.
7.Params.sensori.extractionfnc alanı tek tırnak içinde, bir çıkarma yöntemiyle m-dosyasının adını tanımlayan bir dizedir. Bu çıkarma yöntemi, k+1 sensör verisini göz önüne ladığımızda z(k+1) ve R(k+1) gözlemlerini üretmeyi sağlar.
[source, Matlab]
-----
params.sensor3.extractionfnc = 'extractbeacons';
-----
8.Params.sensori.xs alanı, deterministik robotto-sensör dönüşümü xS'yi tanımlayan 3 x 1 vektördür. Sensör i'nin verileri, sensör i'ye eklenen bir referans çerçevesi olan S'de temsil edildiği varsayılır (Şekil 1.18'e bakınız).

[source, Matlab]
-----
params.sensor3.xs = [0.2945; 0; 0.0];
-----
9.params.sensori.rs , params.sensori.anglereso ,params.sensori.stdrho, aralık sensörünün maksimum algılama yarıçapını [m] cinsinden, radardaki açısal çözünürlüğü ve radyal olarak sabit bir standart sapmayı belirten float sayılarıdır . Bu parametreler, drawrawdata veya extractlines, çizgi çıkarma yöntemi bu araç kutusu sürümünde çeşitli yerlerde gereklidir. 
[source, Matlab]
-----
params.sensor2.rs = 8.0; [m]
params.sensor2.anglereso = 0.5*pi/180;  [rad]
params.sensor2.stdrho = 0.02; [m]
-----
10.params.sensori.kl ve params.sensori.kr, diferansiyel sürücü robot sınıfının durum tahmini yönteminde gereklidir. Bunlar, sistematik olmayan odometri hatalarının büyüme faktörlerini belirten float sayılarıdır( 1 / [m]). Daha fazla bilgi için help robotdd / predict yazın.

11.Ana sensörü tanımlamak için  params.mastersensid parametresi gereklidir.
[source, Matlab]
-----
params.mastersensid = 2;
-----

=== 5)Algoritma ve Kullanıcı Parametrelerini Belirleme

1.Sensörlerin ve robotların tanımı yanında, özellik çıkarma, slam, lokalizasyon veya kullanıcı tarafından belirlenen algoritmalar için diğer parametreler de params yapısına eklenebilir. [M] cinsinden bölümleme için bir eşik mesafesi gerektiren bir işaret uzaklığı algoritması ile başlayalım, bir işaret ışığı okumasının maksimum bir menzil değeri kabul edilecek ve [m] cinsinden dmax = RS - d(ignore) olarak ifade edilecek ve minimum okuma sayısı sağlanacaktır. Bir küme veya segmentin geçerli bir işaretçi ölçümü olması için.
[source, Matlab]
-----
params.beaconthreshdist = 0.15; % in [m]
params.ignoredist = 0.1; % in [m]
params.minnpoints = 2;
-----
2.Son parametre olan Cb ise, ham sinyali okumalarının sabit bir x, y konumu belirsizliğini belirten 2 × 2 matrisidir.
[source, Matlab]
-----
params.Cb = 0.01*eye(2);
-----
.Not=Yukarıdaki tanımlamalar Sjursflatbeaconsetup.m içindeki algoritma parametre tanımlamalarıdır.

3.Atriyum deneyi gibi çizgi çıkarma kullanıldığında, kurulum dosyası aşağıdaki parametrelerin tanımlarını içermelidir.
[source, Matlab]
-----
params.windowsize = 11; % in number of points
params.threshfidel = 0.2;
params.fusealpha = 0.9999; % between 0 and 1
params.minlength = 0.75; % in [m]
params.compensa = 1*pi/180; % in [rad]
params.compensr = 0.01; % in [m]
params.cyclic = 0; % 0: non-cyclic or 1: cyclic
-----
4.Params.alpha alanı, eşleştirme için önem seviyesini belirterek, 0 ile 1 arasında bir float bir değer alan sayısıdır.
[source, Matlab]
-----
params.alpha = 0.999;
-----
5.Params.axisvec alanı, drawrawdata ve slam'ın çizileceği şekil penceresinin eksen sınırlarını belirten 1 x 4 vektördür.
[source, Matlab]
-----
params.axisvec = [-14 24 -19 13];
-----
== Chapter 2

=== 1)Genel m-dosyaları (lib klasörü)

1.x = chi2invtable(p,v), p değerinde v serbestlik derecesine sahip olan χ2 kümülatif dağılım fonksiyonunun (cdf) tersini döndürür.  V serbestlik dereceli χ 2 cdf, v / 2 ve 2 parametreleriyle Γ cdf'dir. Chi2invtable (veya chi2inv) tipik bir kullanım senaryosu: bir Kalman filtre lokalizasyonu veya slam devresi eşleme aşamasındadır. α olasılığı ve n boyutunun özellikleri göz önüne alındığında, ikili tablo, inovasyon ile eşleşen bir adayın νij ve inovasyon kovaryansı Sij'nin kabul edilmesi için sahip olabileceği maksimal Mahalanobis mesafesini (or gate distance) verir. Diğer bir deyişle, eşlik νTij Sij νij < χ2n,α gibi kabul edilir.

[source, Matlab]
-----
//10 derecelik serbestlik derecesine sahip  chi-square dağılımından örneklerin %95'ini aşan bir değer bulun.
x = chi2inv(0.95,10)
x =
  18.3070
-----

2.Xik = compound(xij, xjk), head-to-tail şeklinde düzenlenmiş iki  boyutlu dönüşüm xij ve xjk'nin bileşik ilişkisini döndürür.
Örnek : W'nin referans çerçevesinde R nesnesini ifade eden xW R dönüşümü ve R çerçevesinde S nesnesini temsil eden xRS'i dönüştürmek için, xW S bileşimi, S'yi W çerçevesinde temsil eden ilişki : xW S = xW R ⊕ xRS

3.α = diffangleunwrap (α1, α2), iki açıyla α1 ve α2 arasındaki minimum fark α = α1 - α2'yi belirler. α1 veya α2 Inf ise Inf döndürülür.
[source, Matlab]
-----
a = diffangleunwrap(107.54,-136.49)
a =

   -1.0142
-----
4.drawarrow(xs,xe,filled,hsize,color) ekrana ok(arrow) çizdirme komutudur. İlk 2 elemanı x ve y koordinatları, 3. elemanı  kafa dolumunu etkinleştirir ve devre dışı bırakır, hsize okun başının büyüklüğünü [m] cinsinden belirtir ve color okun rengini belirtir.
[source, Matlab]
-----
drawarrow([1 3 -pi/1.8] , [2 0 pi/30], 0, 1 ,'k');
drawarrow([-3 2 -pi/8],[-2 1 3*pi/2],0,0.3,'b');
-----
5.drawellipse(x,a,b,color) Ekrana elips çizdirme komutudur. a ve b  yarı eksen belirtir.
[source, Matlab]
-----
drawellipse([1 -0.4 pi/6],1,0.5,'k')
drawellipse([0.5 0 pi/6],0.25,0.5,'b');
-----
6.drawlabel(x,str,scale,offset,color) ekranda ölçeklenebilir metin oluşturma komutudur.X = [x, y, θ] T pozsiyonunda ölçeklenebilir metin dizesini çizer. Scale = 1 ile harflerin yüksekliği 1 metredir. Offset metni, [x] 'deki metni, pozitif x ve y yönünde x, y konumundan kaydırır.
[source, Matlab]
-----
plot(-3,2,'k+'); drawlabel([-3 2 0],'123',0.5,0.0,'k');
plot(-1,2,'k+'); drawlabel([-1,2 -2.8],'R1',0.2,0.1,[.5 .5 .5]);
-----
7.drawprobellipse(x,C,alpha,color) 2D'de bir Gaussianın eliptik olasılık bölgesi çizdirir.C,  2 x 2 kovaryans matrisidir.Elips, x = [x, y]T merkezlidir.
[source, Matlab]
-----
x1 = [ 1,2]; C1 = [0.25 -0.2; -0.2 0.3];
drawprobellipse(x1,C1,0.95,'k');
-----
8.drawrawdata(setupfilename,startstep,nsteps) sensörlerin ham verilerini çizer.
9.drawreference(x,label,size,color) Koordinat referans çerçevesini çizdirir. X= [x, y, θ]T'de bir referans çerçevesi çizer ve dize etiketiyle etiketlendirir. Size, çerçeve eksenlerinin [m] cinsinden uzunluğudur.
[source, Matlab]
-----
drawreference([0 2 pi/8],'W',1,'k');
drawreference([2 2.3 -0.3],'',0.6,[.6 .6 .6]);
-----
10.drawrobot(x,color,type)  ekrana robot çizdirir. X = [x, y, θ]T koordinatında bir robot çizer.
[source, Matlab]
-----
drawrobot([0 1 1.5],'k',0);
drawrobot([1 1 1.4],'k',1);
drawrobot([2 1 1.3],'k',2);
drawrobot([3 1 1.2],'k',3);
drawrobot([4 1 1.1],'k',4);
drawrobot([5 1 1.0],'k',5);
-----
11.drawroundedrect(x,w,h,r,filled,color) yuvarlarılmış dikdörtgen çizdirir. X, 3 x 1 vektörü [x, y, θ] T koordinatı , yuvarlatılmış köşeli yarıçap r, genişlik w ve yükseklik h olan, x merkezli bir dikdörtgen çizer. Filled = 1 ile dikdörtgen color rengi ile doldurulur, filled = 0 ise sadece dikdörtgen çizilir.
[source, Matlab]
-----
drawroundedrect([3.0 1 2.4],0.2,1.7,0.0,0,'r');
drawroundedrect([4.0 0 2.3],0.4,0.4,0.2,1,[.8 .8 .8]);
-----
12.drawtransform(xs,xe,shape,label,color) xs (3 × 1) konumundan xe'ye (3 × 1) kadar eğri bir çizgi çizer. Shape eğrinin şeklini kontrol eder.
[source, Matlab]
-----
plot(0,0,'k+'); plot(0.2, 1.5,'k+');
drawtransform([0 0],[0.2 1.5],'/','x1',[.9 .8 .0]);

plot(1,0,'k+'); plot(1.2, 1.5,'k+');
drawtransform([1 0],[1.2 1.5],'\','x2',[.7 .6 .0]);
-----
13.Xji = icompound (xij), xij ilişkisine bakıldığında ters çevrilmiş 2D dönüşümünü xji'yi döndürür. Tüm x'ler 3 x 1 vektördür, tüm açılar [0,2π] arallığında.

14.J = j1comp (xi, xj) birinci işlenen xi'ye göre türetilen xi ve xj'nin 2D bileşiminin Jacob matrisini döndürür. Tüm x'ler 3 x 1 vektör, J, 3 x 3 matrisidir.Jacobian, xik = xij ⊕ xjk bileşiminin xij ve xjk giriş dönüşümleri belirsiz olduğunda birinci derece hata yayılımı gerçekleştirmek için kullanılır. 

15.J = j2comp (xi, xj), ikinci işlenen xj'e göre türetilen xi ve xj'nin 2D bileşiminin Jacob matrisini döndürür. Tüm x'ler 3 x 1 vektör, J, 3 x 3 matrisidir.

16.J = jinv (xij), xij'nin xji dönüşümü Jacob matrisini döndürür. Tüm xler 3 x 1 vektöre sahiptir.

17.d = mahalanobis(v,S) mahalonobis mesafesini hesaplar. v ve yenilik kovaryans matrisi S olarak verilen chi square dağıtılan Mahalanobis mesafesini hesaplar .Mahalanobis mesafesi, ikinci dereceden bir formdur ve bir matris S'nin pozitif kesinliğini test etmeyi sağlar.

18.[Xw, Cw] = meanwm (x, C), çok değişkenli ağırlıklı ortalamayı hesaplar. X, m × n boyutundaki bir matristir ve her sütun, m × 1 boyutunda Gauss dağıtılan rasgele bir vektör olarak yorumlanır. C, bir m × m × n matrisidir, burada her m × m matrisi, kendi münasebetiyle ilişkili kovaryans tahmini olarak yorumlanan sıra vektörüdür. İşlev, sırasıyla m × 1 ve m × m boyutlarının ağırlıklı ortalama vektörü xw'yi ve ağırlıklı kovaryans matrisi Cw'yi döndürür.
19.ar = setangletorange (a, min) a açısını [min .. min + 2π ] aralığına yerleştirir. 

=== 2) M-dosyalarını içe aktarma(import folder)
1.
